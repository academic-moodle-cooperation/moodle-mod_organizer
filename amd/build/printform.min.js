define ("mod_organizer/printform",["jquery","core/config","core/log"],function(a,b,c){var d=new function Printform(){this.iconminus="";this.iconplus=""};d.init=function(e){function f(){var d="";a("img[id$='_thiconplus']").not(":hidden").each(function(){d+=a(this).attr("col")+","});var e={method:"get",url:b.wwwroot+"/lib/ajax/setuserpref.php",data:{sesskey:b.sesskey,pref:encodeURI("mod_organizer_noprintfields"),value:encodeURI(d)},dataType:"json",beforeSend:function beforeSend(){c.info("set user preference mod_organizer_noprintfields: "+d,"organizer")},success:function success(){c.info("set user preference OK","organizer")},error:function error(){c.error("set user preference FAILED","organizer")}};a.ajax(e)}d.iconminus=e.iconminus;d.iconplus=e.iconplus;(function(){var b=a("#print_preview");b.find("th").find("a[name$=_cell]").each(function(){var b=a(this).attr("name"),c=b.split("_")[0],e=d.iconminus.replace("xxx",c+"_thiconminus").replace("yyy",c),f=d.iconplus.replace("xxx",c+"_thiconplus").replace("yyy",c);a(this).parent().append(e).append(f);a("#"+c+"_thiconplus").hide()});var c=a("#organizer_main_cointainer form");a("input[name=\"downloadfile\"]").click(function(){c.attr("target","_blank")});a("input[name=\"cancel\"]").click(function(){c.attr("target","_self")})})();var g=a("#print_preview");g.find("th").find("img[id*=_thicon]").on("click",function(b){var c=a(b.target),d=c.attr("col"),e=c.attr("src"),g;if(-1!=e.indexOf("minus")){g=!0;a("#"+d+"_thiconminus").hide();a("#"+d+"_thiconplus").show();a("a[name="+d+"_cell]").hide()}else{g=!1;a("#"+d+"_thiconplus").hide();a("#"+d+"_thiconminus").show();a("a[name="+d+"_cell]").show()}var h=a("#print_preview");h.find("span[name=\""+d+"_cell\"]").each(function(){if(g){a(this).hide()}else{a(this).show()}});f()});(function(){var b=a("#print_preview");b.find("th").find("a[noprint*=1]").each(function(){var b=a(this).attr("name"),c=b.split("_")[0];a("#"+c+"_thiconminus").trigger("click")})})()};return d});
//# sourceMappingURL=printform.min.js.map

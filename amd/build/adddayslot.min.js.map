{"version":3,"file":"adddayslot.min.js","sources":["../src/adddayslot.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package\n * @subpackage organizer\n * @copyright 2020 Thomas Niedermaier (thomas.niedermaier@gmail.com)\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Create new dayslots\n */\n\n\ndefine(\n    ['jquery'], function($) {\n\n        /**\n         * @constructor\n         * @alias module:mod_organizer/adddayslot\n         */\n        var Adddayslot = function() {\n\n            this.totalslots = 0;\n            this.displayallslots = 0;\n            this.totalday = \"\";\n            this.totaltotal = \"\";\n            this.current = \"0\";\n        };\n\n        var instance = new Adddayslot();\n\n        instance.init = function(param) {\n\n            instance.totalslots = param.totalslots; // Initial maximum of days (despite only one is displayed).\n            instance.displayallslots = param.displayallslots; // Whether to display all days so far generated.\n            instance.totalday = param.totalday; // String for new slots amount status message for a day.\n            instance.totaltotal = param.totaltotal; // String for new slots amount total status message.\n            instance.relativedeadline = param.relativedeadline; // Relative deadline for slot registrations in seconds.\n            instance.relativedeadlinestring = param.relativedeadlinestring; /* String warning message if slots had\n            not been created due to registration deadline. \"xxx\" is replaced by the number of not created slots. */\n            instance.allowcreationofpasttimeslots = param.allowcreationofpasttimeslots;// Deadline for registrations(s).\n            instance.pasttimeslotsstring = param.pasttimeslotsstring; // String warning message if slots had\n\n            if (instance.displayallslots == 0) { // So the form is loaded initially.\n\n                // Hide all days except the first one.\n                let i;\n                for (i = instance.totalslots - 1; i > 0; i--) {\n                    if ($('#id_newslots_' + String(i) + '_day').val() == -1) {\n                        $(\"#id_newslots_\" + String(i) + \"_day\").closest(\".form-group.row.fitem\").hide(); // Boost-theme.\n                        $(\"#fgroup_id_slotgroup\" + String(i)).hide(); // Clean-theme.\n                    } else {\n                        break;\n                    }\n                }\n                // As long as not all slots are visible hide the add day button.\n                if (i < instance.totalslots - 1) {\n                    $('#id_addday').hide();\n                }\n\n            } else {\n                instance.current = instance.totalslots;\n                evaluateallrows();\n            }\n\n            // If a new slot field is changed evaluate the row to provide the forecast.\n            $('[name^=\"newslots\"]').not(':checkbox').on('change', startevaluation);\n\n            // After relevant input is changed recalculate the forecasts.\n            $('input[name^=\"duration\"]').on('change', evaluateallrows);\n            $('select[name^=\"duration\"]').on('change', evaluateallrows);\n            $('input[name^=\"gap\"]').on('change', evaluateallrows);\n            $('select[name^=\"gap\"]').on('change', evaluateallrows);\n            $('input[name=\"maxparticipants\"]').on('change', evaluateallrows);\n            $('select[name^=\"startdate\"]').on('change', evaluateallrows);\n            $('select[name^=\"enddate\"]').on('change', evaluateallrows);\n\n            // If apply period starts now deactivate apply date in form.\n            if ($(\"#id_now\").prop(\"checked\") == true) {\n                $('[name^=availablefrom]').prop(\"disabled\", true);\n                $('#id_availablefrom_timeunit').prop(\"disabled\", true);\n            }\n\n            /**\n             * Get index of changed row and start evaluation.\n             *\n             * @param {object} e event of changed row element\n             */\n            function startevaluation(e) {\n                var name = $(e.target).attr(\"name\");\n                var i = parseInt(name.replace('newslots[', ''));\n                var valdayfrom = parseInt($(\"select[name='newslots[\" + i + \"][day]']\").val());\n                var valdayto = parseInt($(\"select[name='newslots[\" + i + \"][dayto]']\").val());\n                var valfrom = parseInt($(\"select[name='newslots[\" + i + \"][fromh]']\").val()) +\n                    parseInt($(\"select[name='newslots[\" + i + \"][fromm]']\").val());\n                // Proposal for to-date's time when from-date's time has been changed.\n                if (valdayfrom != -1 && name.indexOf('dayto') == -1 && name.indexOf('toh') == -1 && name.indexOf('tom') == -1) {\n                    var periodstartdate = getstartdate();\n                    var periodenddate = getenddate();\n                    var jsdaydate = 0;\n                    for (var daydate = periodstartdate; daydate <= periodenddate; daydate = addDays(daydate * 1000, 1)) {\n                        jsdaydate = new Date(daydate * 1000);\n                        var iday = jsdaydate.getDay();\n                        var iweekday = iday ? (iday - 1) : 6;\n                        if (valdayfrom == iweekday) {\n                            break;\n                        }\n                    }\n                    var pdate = (jsdaydate / 1000) + valfrom + getduration();\n                    var jspdate = new Date(pdate * 1000);\n                    var pday = jspdate.getDay();\n                    var pweekday = pday ? (pday - 1) : 6;\n                    $(\"select[name='newslots[\" + i + \"][dayto]']\").val(pweekday);\n                    valdayto = pweekday;\n                    var hours = jspdate.getHours();\n                    var minutes = jspdate.getMinutes();\n                    minutes = minutes % 5 ? minutes + (5 - (minutes % 5)) : minutes;\n                    var pseconds = minutes * 60;\n                    $(\"select[name='newslots[\" + i + \"][toh]']\").val(hours * 3600);\n                    $(\"select[name='newslots[\" + i + \"][tom]']\").val(pseconds);\n                }\n                if (valdayfrom != -1 && valdayto != -1) {\n                    evaluaterow(i);\n                    shownextnewslot(i);\n                } else {\n                    resetrowevaluation(i);\n                }\n                writetotal();\n            }\n\n            /**\n             * Evaluate a certain row to make forecast.\n             *\n             * @param {number} i Index of row\n             */\n            function evaluaterow(i) {\n                var howmanyslots = getslots(i);\n                var slots = howmanyslots[0];\n                var slotsnotcreatedduetodeadline = howmanyslots[1];\n                var slotsnotcreatedduetopasttime = howmanyslots[2];\n                var pax = getpax();\n                pax = pax * slots;\n                var forecaststring = instance.totalday.replace(\"xxx\", slots.toString()).replace(\"yyy\", pax.toString());\n                if (slotsnotcreatedduetodeadline > 0) {\n                    forecaststring += \" (\" + instance.relativedeadlinestring.replace(\"xxx\",\n                        slotsnotcreatedduetodeadline.toString()) + \")\";\n                }\n                if (slotsnotcreatedduetopasttime > 0) {\n                    forecaststring += \" (\" + instance.pasttimeslotsstring.replace(\"xxx\",\n                        slotsnotcreatedduetopasttime.toString()) + \")\";\n                }\n                $(\"span[name='forecastday_\" + i + \"']\").html(forecaststring);\n                $(\"span[name='newslots_\" + i + \"']\").html(slots.toString());\n                $(\"span[name='newpax_\" + i + \"']\").html(pax.toString());\n            }\n\n            /**\n             * Set row evaluation to zero.\n             *\n             * @param {number} i Index of row\n             */\n            function resetrowevaluation(i) {\n                var slots = 0;\n                var pax = 0;\n                var forecaststring = instance.totalday.replace(\"xxx\", slots.toString()).replace(\"yyy\", pax.toString());\n                $(\"span[name='forecastday_\" + i + \"']\").html(forecaststring);\n                $(\"span[name='newslots_\" + i + \"']\").html(slots.toString());\n                $(\"span[name='newpax_\" + i + \"']\").html(pax.toString());\n            }\n\n            /**\n             * Reevaluate all rows and write the totals.\n             */\n            function evaluateallrows() {\n                for (var i = 0; i < instance.current; i++) {\n                    evaluaterow(i);\n                }\n                writetotal();\n            }\n\n            /**\n             * Get amount of slots of row i.\n             *\n             * @param {number} i Index of row\n             * @returns {array} returnvalues slots, slotsnotcreated1, slotsnotcreated2\n             */\n            function getslots(i) {\n                // No selected day-from: return 0.\n                var dayfromvalue = parseInt($(\"select[name^='newslots[\" + i + \"][day]']\").val());\n                if (dayfromvalue == -1) {\n                    return [0, 0, 0];\n                }\n                // No selected day to: return 0.\n                var daytovalue = parseInt($(\"select[name^='newslots[\" + i + \"][dayto]']\").val());\n                if (daytovalue == -1) {\n                    return [0, 0, 0];\n                }\n                // Get period, time from, slot duration and gap between slots.\n                var periodstartdate = getstartdate();\n                var periodenddate = getenddate();\n                var valfrom = parseInt($(\"select[name='newslots[\" + i + \"][fromh]']\").val()) +\n                    parseInt($(\"select[name='newslots[\" + i + \"][fromm]']\").val());\n                var valto = parseInt($(\"select[name='newslots[\" + i + \"][toh]']\").val()) +\n                    parseInt($(\"select[name='newslots[\" + i + \"][tom]']\").val());\n                // Duration + gap in seconds.\n                var duration = getduration();\n                var iteration = duration + getgap();\n                var iweekday, daydate, jsdaydate, datefrom, dateto, itime;\n                var slots = 0;\n                var slotsnotcreatedduetodeadline = 0;\n                var slotsnotcreatedduetopasttime = 0;\n                // Iterate through days of period.\n                for (daydate = periodstartdate; daydate <= periodenddate; daydate = addDays(daydate * 1000, 1)) {\n                    jsdaydate = new Date(daydate * 1000);\n                    iweekday = jsdaydate.getDay() ? (jsdaydate.getDay() - 1) : 6;\n                    if (dayfromvalue != iweekday) {\n                        continue;\n                    }\n                    datefrom = daydate + valfrom;\n                    dateto = daydate + ((daytovalue - dayfromvalue) * 86400) + valto;\n                    while (dateto < datefrom) {\n                        dateto += (7 * 86400);\n                    }\n                    // New: Slot overlapping period end date is allowed!\n                    if (datefrom < periodstartdate || datefrom > periodenddate) {\n                        continue;\n                    }\n                    var now = new Date();\n                    var date = now.getTime() / 1000;\n                    dateto = periodenddate < dateto ? periodenddate : dateto;\n                    for (itime = datefrom; itime + duration <= dateto; itime += iteration) {\n                        if (itime - date < instance.relativedeadline && itime - date > 0) {\n                            slotsnotcreatedduetodeadline++;\n                        } else if (itime - date < 0 && instance.allowcreationofpasttimeslots == 0) {\n                            slotsnotcreatedduetopasttime++;\n                        } else {\n                            slots++;\n                        }\n                    }\n                }\n                var returnvalues = [slots, slotsnotcreatedduetodeadline, slotsnotcreatedduetopasttime];\n                return returnvalues;\n            }\n\n            /**\n             * Get max amount of participants of this slot.\n             * @return {int} pax\n             */\n            function getpax() {\n                var pax = $('input[name=maxparticipants]').val();\n                if ($.isNumeric(pax)) {\n                    return pax;\n                } else {\n                    return 0;\n                }\n            }\n\n            /**\n             * Write out overall sums of forecast bookings.\n             */\n            function writetotal() {\n                var totalslots = 0;\n                var totalpax = 0;\n                $(\"span[name^='newslots_']\").each(function() {\n                    var slots = parseInt($(this).html());\n                    if (isNaN(slots) == false) {\n                        totalslots += slots;\n                    }\n                });\n                $(\"span[name^='newpax_']\").each(function() {\n                    var pax = parseInt($(this).html());\n                    if (isNaN(pax) == false) {\n                        totalpax += pax;\n                    }\n                });\n                var forecaststring = instance.totaltotal.replace(\"xxx\", totalslots.toString()).replace(\"yyy\", totalpax.toString());\n                $(\"div[name='organizer_newslots_forecasttotal']\").html(forecaststring);\n            }\n\n            /**\n             * Get the startdate for the series of dates.\n             * @return {number}\n             */\n            function getstartdate() {\n                var startdateday = $(\"select[name='startdate[day]']\").val();\n                var startdatemonth = $(\"select[name='startdate[month]']\").val() - 1;\n                var startdateyear = $(\"select[name='startdate[year]']\").val();\n                var startdatedate = new Date(startdateyear, startdatemonth, startdateday);\n                return startdatedate.getTime() / 1000;\n            }\n\n            /**\n             * Get the enddate for the series of dates.\n             * @return {number}\n             */\n            function getenddate() {\n                var enddateday = $(\"select[name='enddate[day]']\").val();\n                var enddatemonth = $(\"select[name='enddate[month]']\").val() - 1;\n                var enddateyear = $(\"select[name='enddate[year]']\").val();\n                var enddatedate = new Date(enddateyear, enddatemonth, enddateday);\n                return enddatedate.getTime() / 1000 + 86400; // Include last day of period.\n            }\n\n            /**\n             * Get the duration of a slot.\n             * @return {number} in seconds\n             */\n            function getduration() {\n                var durationnumber = parseInt($(\"input[name='duration[number]']\").val());\n                var durationtimeunit = parseInt($(\"select[name='duration[timeunit]']\").val());\n                if (isNaN(durationnumber)) {\n                    return 0;\n                }\n                // Duration in seconds.\n                var duration = durationnumber * durationtimeunit;\n                return duration;\n            }\n\n            /**\n             * Get the gap between the dates, if any.\n             * @return {number} in seconds\n             */\n            function getgap() {\n                var gapnumber = parseInt($(\"input[name='gap[number]']\").val());\n                var gaptimeunit = parseInt($(\"select[name='gap[timeunit]']\").val());\n                if (isNaN(gapnumber)) {\n                    gapnumber = 0;\n                }\n                // Gap in seconds.\n                var gap = gapnumber * gaptimeunit;\n                return gap;\n            }\n\n            /**\n             * Function to add a day to a given date.\n             * @param {string} date to add a day to\n             * @param { number } days to add to the date\n             * @return {number} the new date\n             */\n            function addDays(date, days) {\n                var result = new Date(date);\n                result.setDate(result.getDate() + days);\n                return result.getTime() / 1000;\n            }\n\n            /**\n             * Function to add a day to a given date.\n             * @param {string} id contains the index of the current slot\n             */\n            function shownextnewslot(id) {\n                // As soon as a to time is edited, display the next day.\n                let nextindex = parseInt(id) + 1;\n                if (nextindex > instance.current) {\n                    $(\"#id_newslots_\" + String(nextindex) + \"_day\").closest(\".form-group.row.fitem\").show(); // Boost-theme.\n                    $(\"#fgroup_id_slotgroup\" + String(nextindex)).show(); // Clean-theme.\n                    if (nextindex == instance.totalslots) {\n                        $('#id_addday').show();\n                    }\n                    instance.current++;\n                }\n            }\n\n        };\n\n        return instance;\n\n    });"],"names":["define","$","instance","totalslots","displayallslots","totalday","totaltotal","current","init","param","relativedeadline","relativedeadlinestring","allowcreationofpasttimeslots","pasttimeslotsstring","i","String","val","closest","hide","evaluateallrows","evaluaterow","howmanyslots","dayfromvalue","parseInt","daytovalue","daydate","jsdaydate","datefrom","dateto","itime","periodstartdate","getstartdate","periodenddate","getenddate","valfrom","valto","duration","getduration","iteration","gapnumber","gaptimeunit","isNaN","getgap","slots","slotsnotcreatedduetodeadline","slotsnotcreatedduetopasttime","addDays","Date","getDay","date","getTime","getslots","pax","isNumeric","getpax","forecaststring","replace","toString","html","writetotal","totalpax","each","this","startdateday","startdatemonth","startdateyear","enddateday","enddatemonth","enddateyear","durationnumber","durationtimeunit","days","result","setDate","getDate","not","on","e","name","target","attr","valdayfrom","valdayto","indexOf","iday","pdate","jspdate","pday","pweekday","hours","getHours","minutes","getMinutes","pseconds","id","nextindex","show","shownextnewslot","resetrowevaluation","prop"],"mappings":"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"}
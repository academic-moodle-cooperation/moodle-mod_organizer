{"version":3,"file":"editform.min.js","sources":["../src/editform.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package\n * @subpackage organizer\n * @copyright 2017 Thomas Niedermaier (thomas.niedermaier@gmail.com)\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * In edit form: Signalling fields with different values when multi-editing.\n */\n\n\ndefine(\n    ['jquery'], function($) {\n\n        /**\n         * @constructor\n         * @alias module:mod_organizer/editform\n         */\n        var Editform = function() {\n            this.imagepaths = false;\n        };\n\n        var instance = new Editform();\n\n        instance.init = function(param) {\n\n            if (param.imagepaths) {\n                this.imagepaths = param.imagepaths;\n            }\n\n            /**\n             * Check if input field has been changed.\n             * @param {object} e input element\n             */\n            function detect_change(e) {\n                var element = $(e.target);\n                var name = element.attr('name').split(\"[\")[0];\n                if ($(\"[id^=mform1] input[name^=mod_\" + name + \"]\").val() != \"1\") {\n                    $(\"[id^=mform1] input[name^=mod_\" + name + \"]\").val(\"1\");\n                    set_icon_changed(name);\n                }\n            }\n\n            /**\n             * Display the icon for changed content.\n             * @param {string} name of the icon\n             */\n            function set_icon_changed(name) {\n                var icon = $(\"[id^=mform1] img[id$=\" + name + \"_warning]\");\n                if (icon.attr('src') != instance.imagepaths.changed) {\n                    icon.attr('src', instance.imagepaths.changed);\n                    icon.attr('title', $(\"[id^=mform1] [name=warningtext2]\").val());\n                }\n            }\n\n            var initialstate;\n\n            /**\n             * Reset the edit form.\n             */\n            function reset_edit_form() {\n                $(\"[id^=mform1] input[name^=mod_]\").val(0);\n                var icons = $(\"[id^=mform1] img[name$=_warning]\");\n                icons.attr('src', instance.imagepaths.warning);\n                icons.attr('title', $(\"[id^=mform1] [name=warningtext1]\").val());\n                $('[id^=mform1] [name^=availablefrom]:not([name*=now])').attr('disabled', initialstate);\n            }\n\n            $('[id^=mform1]').find('select, input[type=checkbox]').on('change', detect_change);\n            $('[id^=mform1]').find('input[type=text], textarea').on('keydown', detect_change);\n            $('#id_editreset').on('click', reset_edit_form);\n\n        };\n\n        return instance;\n\n    }\n);\n"],"names":["define","$","instance","imagepaths","init","param","detect_change","e","name","target","attr","split","val","icon","changed","set_icon_changed","find","on","icons","warning","initialstate"],"mappings":";;;;;;AA2BAA,gCACI,CAAC,WAAW,SAASC,OAUbC,SAAW,IAJA,gBACNC,YAAa,UAKtBD,SAASE,KAAO,SAASC,gBAUZC,cAAcC,OAEfC,KADUP,EAAEM,EAAEE,QACCC,KAAK,QAAQC,MAAM,KAAK,GACkB,KAAzDV,EAAE,gCAAkCO,KAAO,KAAKI,QAChDX,EAAE,gCAAkCO,KAAO,KAAKI,IAAI,cASlCJ,UAClBK,KAAOZ,EAAE,wBAA0BO,KAAO,aAC1CK,KAAKH,KAAK,QAAUR,SAASC,WAAWW,UACxCD,KAAKH,KAAK,MAAOR,SAASC,WAAWW,SACrCD,KAAKH,KAAK,QAAST,EAAE,oCAAoCW,QAZzDG,CAAiBP,OAbrBH,MAAMF,kBACDA,WAAaE,MAAMF,YAyC5BF,EAAE,gBAAgBe,KAAK,gCAAgCC,GAAG,SAAUX,eACpEL,EAAE,gBAAgBe,KAAK,8BAA8BC,GAAG,UAAWX,eACnEL,EAAE,iBAAiBgB,GAAG,oBATlBhB,EAAE,kCAAkCW,IAAI,OACpCM,MAAQjB,EAAE,oCACdiB,MAAMR,KAAK,MAAOR,SAASC,WAAWgB,SACtCD,MAAMR,KAAK,QAAST,EAAE,oCAAoCW,OAC1DX,EAAE,uDAAuDS,KAAK,WAV9DU,eAmBDlB"}
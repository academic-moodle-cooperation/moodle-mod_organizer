{"version":3,"file":"editform.min.js","sources":["../src/editform.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * @package\r\n * @subpackage organizer\r\n * @copyright 2017 Thomas Niedermaier (thomas.niedermaier@gmail.com)\r\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\n/**\r\n * In edit form: Force selection of grouping if group mode is choosen.\r\n */\r\n\r\n\r\ndefine(\r\n    ['jquery'], function($) {\r\n\r\n        /**\r\n         * @constructor\r\n         * @alias module:mod_organizer/editform\r\n         */\r\n        var Editform = function() {\r\n            this.imagepaths = false;\r\n        };\r\n\r\n        var instance = new Editform();\r\n\r\n        instance.init = function(param) {\r\n\r\n            if (param.imagepaths) {\r\n                this.imagepaths = param.imagepaths;\r\n            }\r\n\r\n            /**\r\n             * Check if input field has been changed.\r\n             * @param {object} e input element\r\n             */\r\n            function detect_change(e) {\r\n                var element = $(e.target);\r\n                var name = element.attr('name').split(\"[\")[0];\r\n                if ($(\"[id^=mform1] input[name^=mod_\" + name + \"]\").val() != \"1\") {\r\n                    $(\"[id^=mform1] input[name^=mod_\" + name + \"]\").val(\"1\");\r\n                    set_icon_changed(name);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Display the icon for changed content.\r\n             * @param {string} name of the icon\r\n             */\r\n            function set_icon_changed(name) {\r\n                var icon = $(\"[id^=mform1] img[id$=\" + name + \"_warning]\");\r\n                if (icon.attr('src') != instance.imagepaths.changed) {\r\n                    icon.attr('src', instance.imagepaths.changed);\r\n                    icon.attr('title', $(\"[id^=mform1] [name=warningtext2]\").val());\r\n                }\r\n            }\r\n\r\n            var initialstate;\r\n\r\n            /**\r\n             * Reset the edit form.\r\n             */\r\n            function reset_edit_form() {\r\n                $(\"[id^=mform1] input[name^=mod_]\").val(0);\r\n                var icons = $(\"[id^=mform1] img[name$=_warning]\");\r\n                icons.attr('src', instance.imagepaths.warning);\r\n                icons.attr('title', $(\"[id^=mform1] [name=warningtext1]\").val());\r\n                $('[id^=mform1] [name^=availablefrom]:not([name*=now])').attr('disabled', initialstate);\r\n            }\r\n\r\n            $('[id^=mform1]').find('select, input[type=checkbox]').on('change', detect_change);\r\n            $('[id^=mform1]').find('input[type=text], textarea').on('keydown', detect_change);\r\n            $('#id_editreset').on('click', reset_edit_form);\r\n\r\n        };\r\n\r\n        return instance;\r\n\r\n    }\r\n);\r\n"],"names":["define","$","instance","imagepaths","init","param","detect_change","e","name","target","attr","split","val","icon","changed","set_icon_changed","find","on","icons","warning","initialstate"],"mappings":";;;;;;AA2BAA,gCACI,CAAC,WAAW,SAASC,OAUbC,SAAW,IAJA,gBACNC,YAAa,UAKtBD,SAASE,KAAO,SAASC,gBAUZC,cAAcC,OAEfC,KADUP,EAAEM,EAAEE,QACCC,KAAK,QAAQC,MAAM,KAAK,GACkB,KAAzDV,EAAE,gCAAkCO,KAAO,KAAKI,QAChDX,EAAE,gCAAkCO,KAAO,KAAKI,IAAI,cASlCJ,UAClBK,KAAOZ,EAAE,wBAA0BO,KAAO,aAC1CK,KAAKH,KAAK,QAAUR,SAASC,WAAWW,UACxCD,KAAKH,KAAK,MAAOR,SAASC,WAAWW,SACrCD,KAAKH,KAAK,QAAST,EAAE,oCAAoCW,QAZzDG,CAAiBP,OAbrBH,MAAMF,kBACDA,WAAaE,MAAMF,YAyC5BF,EAAE,gBAAgBe,KAAK,gCAAgCC,GAAG,SAAUX,eACpEL,EAAE,gBAAgBe,KAAK,8BAA8BC,GAAG,UAAWX,eACnEL,EAAE,iBAAiBgB,GAAG,oBATlBhB,EAAE,kCAAkCW,IAAI,OACpCM,MAAQjB,EAAE,oCACdiB,MAAMR,KAAK,MAAOR,SAASC,WAAWgB,SACtCD,MAAMR,KAAK,QAAST,EAAE,oCAAoCW,OAC1DX,EAAE,uDAAuDS,KAAK,WAV9DU,eAmBDlB"}
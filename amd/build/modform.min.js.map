{"version":3,"file":"modform.min.js","sources":["../src/modform.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/.\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle. If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @package\n * @subpackage organizer\n * @copyright 2020 Thomas Niedermaier (thomas.niedermaier@gmail.com)\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * In mod_form: Show/Hide select field grouping if select field group mode is chosen/not chosen.\n */\n\n\ndefine(\n    ['jquery'], function($) {\n\n        /**\n     * @constructor\n     * @alias module:mod_organizer/modform\n     */\n        var Modform = function() {\n            this.activateduedatecheckbox = false;\n        };\n\n        var instance = new Modform();\n\n        instance.init = function(param) {\n\n            if (param.activateduedatecheckbox) {\n                this.activateduedatecheckbox = param.activateduedatecheckbox;\n            }\n\n            /**\n             * Display/Hide groupings if groupmode is selected.\n             * @param {object} e event of groupmode field\n             */\n            function check_group_members_only(e) {\n                var isgrouporganizer = $(e.target);\n\n                if (isgrouporganizer.val() == 1) {\n                    $('#id_groupmode').val('1').click();\n                    $('#fitem_id_groupingid').removeAttr('hidden');\n                    $('#fitem_id_groupingid').show();\n                    $('#fitem_id_groupingid').find().each(function() {\n                        $(this).css('display', 'block');\n                        $(this).removeAttr('hidden');\n                    });\n                    $('#id_groupingid').removeAttr('disabled');\n                } else if (isgrouporganizer.val() == 0) {\n                    $('#id_groupmode').val('0').click();\n                    $('#fitem_id_groupingid').prop('hidden', true);\n                    $('#fitem_id_groupingid').find().each(function() {\n                        $(this).css('display', 'none');\n                        $(this).prop('hidden', true);\n                    });\n                    $('#id_groupingid').prop(\"disabled\", true);\n                }\n            }\n\n            /**\n             * Disable groupings if groupmode is deselected.\n             * @param {object} e event of groupmode field\n             */\n            function check_group_mode(e) {\n                var groupmodeselect = $(e.target);\n\n                if (groupmodeselect.val() == 0) {\n                    $('#id_isgrouporganizer').val('0');\n                    $('#fitem_id_groupingid').hide();\n                    $('#id_groupingid').prop('disabled', 'disabled');\n                }\n            }\n\n            $('#id_isgrouporganizer').on('change', check_group_members_only);\n            $('#id_groupmode').on('change', check_group_mode);\n\n            if (this.activateduedatecheckbox && !$('.error')) {\n                $('#id_duedate_enabled').click();\n            }\n        };\n\n        instance.init_gradechange = function(param) {\n            $('input[id^=id_grade]').on(\"change\", function() {\n                alert(param.changegradewarning);\n            });\n        };\n\n            return instance;\n\n    }\n);\n"],"names":["define","$","instance","activateduedatecheckbox","init","param","on","e","isgrouporganizer","target","val","click","removeAttr","show","find","each","this","css","prop","hide","init_gradechange","alert","changegradewarning"],"mappings":";;;;;;AA2BAA,+BACI,CAAC,WAAW,SAASC,OAUbC,SAAW,IAJD,gBACLC,yBAA0B,UAKnCD,SAASE,KAAO,SAASC,OAEjBA,MAAMF,+BACDA,wBAA0BE,MAAMF,yBA4CzCF,EAAE,wBAAwBK,GAAG,mBArCKC,OAC1BC,iBAAmBP,EAAEM,EAAEE,QAEG,GAA1BD,iBAAiBE,OACjBT,EAAE,iBAAiBS,IAAI,KAAKC,QAC5BV,EAAE,wBAAwBW,WAAW,UACrCX,EAAE,wBAAwBY,OAC1BZ,EAAE,wBAAwBa,OAAOC,MAAK,WAClCd,EAAEe,MAAMC,IAAI,UAAW,SACvBhB,EAAEe,MAAMJ,WAAW,aAEvBX,EAAE,kBAAkBW,WAAW,aACE,GAA1BJ,iBAAiBE,QACxBT,EAAE,iBAAiBS,IAAI,KAAKC,QAC5BV,EAAE,wBAAwBiB,KAAK,UAAU,GACzCjB,EAAE,wBAAwBa,OAAOC,MAAK,WAClCd,EAAEe,MAAMC,IAAI,UAAW,QACvBhB,EAAEe,MAAME,KAAK,UAAU,MAE3BjB,EAAE,kBAAkBiB,KAAK,YAAY,OAmB7CjB,EAAE,iBAAiBK,GAAG,mBAXIC,GAGO,GAFPN,EAAEM,EAAEE,QAENC,QAChBT,EAAE,wBAAwBS,IAAI,KAC9BT,EAAE,wBAAwBkB,OAC1BlB,EAAE,kBAAkBiB,KAAK,WAAY,gBAOzCF,KAAKb,0BAA4BF,EAAE,WACnCA,EAAE,uBAAuBU,SAIjCT,SAASkB,iBAAmB,SAASf,OACjCJ,EAAE,uBAAuBK,GAAG,UAAU,WAClCe,MAAMhB,MAAMiB,wBAITpB"}